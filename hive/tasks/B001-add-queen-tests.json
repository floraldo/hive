{
  "id": "B001-add-queen-tests",
  "title": "Create Unit Tests for QueenLite Orchestrator",
  "description": "To improve the robustness and reliability of our Hive system, we need to add unit tests for our core orchestrator, queen.py. The tests should verify the Queen's state management and task handling logic.",
  "instruction": "Create comprehensive unit tests for the QueenLite orchestrator. The tests should:\n\n1. Create a new file: tests/test_queen.py\n2. Create tests/__init__.py for package initialization\n3. Use the pytest framework\n4. Write a test that verifies the Queen can successfully load a task from the hive/tasks directory\n5. Write a test to ensure the process_queue method correctly assigns a 'queued' task to a worker\n6. Write a test for the spawn_worker method to verify it creates processes correctly\n7. Write a test for the recover_zombie_tasks method\n8. Mock any external dependencies (like subprocess calls to the worker) to isolate the Queen's logic\n9. Ensure all new and existing tests pass when pytest is run from the root directory\n\nNOTE: Since there's no existing tests directory, create it first. Focus on testing the core logic without actually spawning real worker processes.",
  "acceptance": [
    "tests/test_queen.py created with at least 4 test functions",
    "tests/__init__.py created",
    "Tests use proper mocking for subprocess calls",
    "All tests pass when running pytest",
    "Test coverage includes: task loading, queue processing, worker spawning, zombie recovery"
  ],
  "priority": "P1",
  "risk": "low",
  "status": "queued",
  "tags": [
    "backend",
    "testing",
    "queen"
  ],
  "created_at": "2025-09-11T12:00:00.000000+00:00",
  "updated_at": "2025-09-11T12:19:43.823280+00:00"
}